# Manor component Library
Desigin system component library for CTM - tested on Node v10.17.0

[View Manor components on Storybook](https://services.dev.comparethemarket.cloud/manor/)

## Usage

### Installation

`yarn add @comparethemarketau/manor`

Wrap your app in the ManorProvider & import styles

```
import { ManorProvider } from '@comparethemarketau/manor/lib';
import '@comparethemarketau/manor/styles.css';

const App = () => (
  <ManorProvider>
    ... your app here
  </ManorProvider>
);
```

Import components as required

```
import { Header } from '@comparethemarketau/manor/lib'

render = () => (
  <Header />
);
```

## Development

- `yarn storybook` - runs storybook for development
- `yarn test` - runs the tests
- `yarn tdd` - runs the tests with logs
- `yarn lint` - runs the linter
- `yarn build` - runs the build
- `yarn commit` - runs git-cz

### Using your local Manor within another project

You might find yourself wanting to pull in your changes to a project using Manor without having to do release (e.g to 
validate that a fix works). This can be done via `yarn link` (or `npm link`):

1. Link `react`, `react-dom` and `styled-components` from the project using Manor, 
*(This is important because it prevents multiple copies of the above libraries being present at runtime, which causes 
things to break and can be confusing to debug)*:
    * `cd /path/to/your_project/node_modules/react && yarn link`
    * `cd /path/to/your_project/node_modules/react-dom && yarn link`
    * `cd /path/to/your_project/node_modules/styled-components && yarn link`
2. In Manor, use the linked libraries from step 1:
    * `cd /path/to/manor && yarn link react && yarn link react-dom && yarn link styled-components`
3. Rebuild Manor
    * `cd /path/to/manor && yarn build`
4. Link Manor in your project
    & `cd /path/to/your_project && yarn link @comparethemarketau/manor`     


### Setting up  Private NPM Token
The variable bamboo_nexus_fe_token_password is used to authenticate with Nexus, this can be generated by performing the command `npm adduser --registry=https://nexus.comparethemarket.com.au/repository/platform-packages/` and following the prompts.

Locally this can be exported as an env variable and specified in your shell: `export bamboo_nexus_fe_token_password=<YOUR_TOKEN>` where YOUR_TOKEN will look like: `1234567e-89aa-1a23-4567-ab12cd3e4fg5`
                            
### FontAwesome icons
We have access to pro icons within the font awesome library. For this, you'll need to add an env variable to your machine in the format of `NPM_FONTAWESOME_TOKEN=<YOUR_TOKEN>` where YOUR_TOKEN will also look like `1234567e-89aa-1a23-4567-ab12cd3e4fg5`

UX holds the account info, where you can log in and grab the key. When set up, import as usual e.g

```
  import { faInfoCircle } from '@fortawesome/pro-regular-svg-icons';
```

## Whitelabeling
Whitelabeling can be achieved via theme files and Manor has been developed with this capability. 

### Adding a theme

Add the theme file in `src/themes` and the export to `src/themes/index`. It's recommended to copy the contents of the CTM
theme file (remember to rename the object) and then override values where necessary.

Update the `getTheme` function (`src/utils/getTheme.js`) - importing your new theme and checking `process.env.MANOR_THEME`
for your theme name.

Finally, so that the theme can be referenced within applications, add an entry for the new theme in the copy() section
of the rollup config, as below:

```
copy({
        targets: [
          { src: 'src/themes/ctm.theme.js', dest: 'lib'},
          { src: 'src/themes/choosi.theme.js', dest: 'lib'}
        ]
      }),
```

### Using a theme

Simply set the `process.env.MANOR_THEME` to your theme name when running your app.
