import { useEffect } from 'react';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { withKnobs, text, boolean, number, select } from '@storybook/addon-knobs';
import { useState } from 'react';
import Loading from '../../components/Loading/Loading.component';
import Button from '../../components/Button/Button.component';

<Meta title="Components|Loading" component={Loading} />

# Loading

The Loading component can be used to provide feedback to a user whilst processing is occurring.

<Preview>
  <Story name="Loading">
    {() => {
     return (
        <Loading />
      )
    }}
  </Story>
</Preview>

### Props

<Props of={Loading} />

# Loading with stop
_Forces the loading to end after three seconds_
<Story name="Loading with stops">
  {() => {
    const [loadVar, isLoadVar] = useState(false);
    const doReset = () => {
      isLoadVar(false);
      setTimeout(() => {
        isLoadVar(true);
      }, 3000);
    }
    useEffect(() => {
    doReset();
    }, []);
    const optionalProps = {
      messages: [
        'Checking your details',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
      ],
      delayLoading: true
    };
    return (
      <>
        {!loadVar && <Loading {...optionalProps} handleLoaded={() => {}} forceStop={loadVar} isDelayMessages />}
        {loadVar && <div style={{fontSize: '30px'}}>Loading done <Button id="test" variant="secondary" handleClick={doReset} size="sm" width="125px">Reset</Button></div>}
      </>
    )
  }}
</Story>

# Loading without stop
<Story name="Loading without stops">
  {() => {
    const [loadVar, isLoadVar] = useState(false);
    setTimeout(() => {
      isLoadVar(true);
    }, 3000);
    const optionalProps = {
      messages: [
        'Checking your details',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
      ],
      delayLoading: true
    };
   return (
      <Loading {...optionalProps} maxProgress={90} handleLoaded={() => {}} />
    )
  }}
</Story>
