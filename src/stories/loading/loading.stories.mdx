import { useEffect } from 'react';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { withKnobs, text, boolean, number, select } from '@storybook/addon-knobs';
import { useState } from 'react';
import Loading from '../../components/Loading/Loading.component';
import Button from '../../components/Button/Button.component';

import Container from '../../components/Grid/Container/Container.component';
import Row from '../../components/Grid/Row/Row.component';
import Column from '../../components/Grid/Column/Column.component';

<Meta title="Components/Loading" component={Loading} />

# Primary Loading

The Loading component can be used to provide feedback to a user whilst processing is occurring.

<Preview>
  <Story name="primary loading">
    {() => {
     return (
       <div style={{marginTop: '100px'}}>
        <Container>
          <Row className="row-view">
            <Column cols="12">
              <Loading />
            </Column>
          </Row>
        </Container>
       </div>
      )
    }}
  </Story>
</Preview>

# Secondary Loading

<Preview>
  <Story name="secondary loading">
    {() => {
     return (
       <div style={{marginTop: '100px'}}>
        <Container>
          <Row className="row-view">
            <Column cols="12">
              <Loading variant="secondary" />
            </Column>
          </Row>
        </Container>
       </div>
      )
    }}
  </Story>
</Preview>

# Loading with stop
_Forces the loading to end after three seconds_
<Story name="loading with stops">
  {() => {
    const [loadVar, isLoadVar] = useState(false);
    const doReset = () => {
      isLoadVar(false);
      setTimeout(() => {
        isLoadVar(true);
      }, 3000);
    }
    useEffect(() => {
    doReset();
    }, []);
    const optionalProps = {
      messages: [
        'Checking your details',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
      ],
      delayLoading: true
    };
    return (
      <div style={{marginTop: '100px'}}>
        <Container>
          <Row className="row-view">
            <Column cols="12">
              {!loadVar && <Loading {...optionalProps} handleLoaded={() => {}} forceStop={loadVar} isDelayMessages />}
              {loadVar && <div style={{fontSize: '30px'}}>Loading done <Button id="test" variant="secondary" handleClick={doReset} size="sm" width="125px">Reset</Button></div>}
            </Column>
          </Row>
        </Container>
      </div>
    )
  }}
</Story>

# Loading without stop
<Story name="loading without stops">
  {() => {
    const [loadVar, isLoadVar] = useState(false);
    setTimeout(() => {
      isLoadVar(true);
    }, 3000);
    const optionalProps = {
      messages: [
        'Checking your details',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
      ],
      delayLoading: true
    };
   return (
    <div style={{marginTop: '100px'}}>
       <Container>
         <Row className="row-view">
           <Column cols="12">
             <Loading {...optionalProps} maxProgress={90} handleLoaded={() => {}} />
           </Column>
         </Row>
       </Container>
     </div>
    )
  }}
</Story>

### Props

<Props of={Loading} />
