import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { withKnobs, text, boolean, number, select } from '@storybook/addon-knobs';
import { useState } from 'react';
import Modal from 'components/Modal/Modal.component';
import Overlay from 'components/Overlay/Overlay.component';
import Button from 'components/Button/Button.component';
import Checkbox from 'components/Checkbox/Checkbox.component';
import Input from 'components/Input/Input.component';
import Container from 'components/Grid/Container/Container.component';
import Row from 'components/Grid/Row/Row.component';
import Column from 'components/Grid/Column/Column.component';
import ModalView from './modal.view';

<Meta title="Components|Modal" component={Modal} />

# Modal

Renders content in a container on top of the rest of the page content. Modal can be configured with or without an overlay.
Unlike a Drawer, Modals can always be closed by the user.

## Behaviour

* When Modal is visible, the `Escape` key will dismiss it.
* Whe Modal is visible, focus is trapped within the Modals contents.

**Switch to canvas view to see examples**

<Story name="modal" parameters={{ docs: { disable: true } }}>
  {() => {
    const [ visible, setVisible ] = useState(false);
    const modalOpen = () => {
      setVisible(!visible);
    }
    const modalClose = () => {
      setVisible(false);
    }
    const overlayClickHandler = () => {
      setVisible(false);
    }
    return (
      <Container>
        <Row>
          <Column md={4}>
            <Button id='preview-btn' variant='secondary' handleClick={modalOpen}>
              Modal Preview
            </Button>
          </Column>
          <Modal id='preview-modal' visible={visible} handleClose={modalClose} size="sm" overlay handleOverlayClick={overlayClickHandler}>
            <p>Some modal content!</p>
          </Modal>
        </Row>
      </Container>
    )
  }}
</Story>


### Props - Modal
<Props of={Modal} />

<Story name="modal with props" decorators={[withKnobs]} parameters={{ docs: { disable: true } }}>
  {() => {
    const id = text('ID');
    const visible = boolean('visible', true);
    const size = select('size', ['sm', 'md', 'lg'], 'sm');
    const className = text('className');
    return (
      <Modal id={id} visible={visible} className={className} size={size}>
        <p>Toggle the visible prop to close</p>
        <p>Inspect the Modal to see the id and additional classes</p>
      </Modal>
    )
  }}
</Story>

<Story name="Mock modal" parameters={{ docs: { disable: true } }}>
  <ModalView />
</Story>
