import { useState } from 'react';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { withKnobs, text, boolean, number, select } from '@storybook/addon-knobs';
import { StepSlider } from '@comparethemarketau/manor-slider';
import getTooltipKnobs from '../tooltipKnobs';

<Meta title="Components/StepSlider" component={StepSlider} />

# StepSlider

Allows selection from a range of discrete values.

<Preview>
  <Story name="step slider">
  {() => {
    const [value, setValue] = useState(5000);
    const marks = [
      {
        value: 0,
        label: 'No Cover'
      },
      {
        value: 5000,
        label: '$5,000',
        defaultIndicator: true
      },
      {
        value: 10000,
        label: '$10,000'
      },
      {
        value: 15000,
        label: '$15,000'
      },
      {
        value: 20000,
        label: '$20,000'
      },
      {
        value: 25000,
        label: '$25,000'
      },
      {
        value: 30000,
        label: '$30,000'
      },
      {
        value: 35000,
        label: 'Unlimited'
      },
    ]
    const handleChange = (e, newValue) => {
      setValue(newValue);
    }
    return (
      <div style={{ padding: '10%' }}>
        <StepSlider
          name="test-slider"
          value={value}
          marks={marks}
          onChange={handleChange}
          label="How much cover do you want?"
          tooltip={{
            title: 'Coverage',
            body: 'The amount you will be covered for',
          }}
        />
      </div>
    );
  }}
  </Story>
</Preview>

### Props
<Props of={StepSlider} />

<Story name="step slider with props" decorators={[withKnobs]} parameters={{ docs: { disable: true } }}>
  {() => {
    const componentPropsId = 'Component Props';
    const tooltipGroupId = 'Tooltip Props';
    const name = text('name', 'test', componentPropsId);
    const id = text('id', 'test', componentPropsId);
    const label = text('label', 'How much cover do you want?', componentPropsId);
    const disabled = boolean('disabled', false, componentPropsId);
    const [value, setValue] = useState(5000);
    const marks = [
      {
        value: 0,
        label: 'None'
      },
      {
        value: 5000,
        label: '$5,000',
        defaultIndicator: true
      },
      {
        value: 10000,
        label: '$10,000'
      },
      {
        value: 15000,
        label: '$15,000'
      },
      {
        value: 20000,
        label: '$20,000'
      },
      {
        value: 25000,
        label: '$25,000'
      },
      {
        value: 30000,
        label: '$30,000'
      },
      {
        value: 35000,
        label: 'Unlimited'
      },
    ]
    const handleChange = (e, newValue) => {
      setValue(newValue);
    }
    const { title, body, placement, screenReaderLabel, variant } = getTooltipKnobs(tooltipGroupId);
    return (
      <div style={{ padding: '10%' }}>
        <StepSlider
          name={name}
          id={id}
          value={value}
          marks={marks}
          onChange={handleChange}
          disabled={disabled}
          label={label}
          tooltip={{
            title,
            body,
            placement,
            screenReaderLabel,
            variant
          }}
        />
      </div>
    );
  }}
  </Story>



<Story name="mock slider question set" parameters={{ docs: { disable: true } }}>
{() => {
  const [cancellation, setCancellation] = useState(20000);
  const [luggage, setLuggage] = useState(5000);
  const [car, setCar] = useState(0);
  const [additional, setAdditional] = useState(5000);
  const cancellationMarks = [
    {
      value: 0,
      label: 'None'
    },
    {
      value: 5000,
      label: '$5,000',
      defaultIndicator: true,
    },
    {
      value: 10000,
      label: '$10,000'
    },
    {
      value: 15000,
      label: '$15,000'
    },
    {
      value: 20000,
      label: '$20,000'
    },
    {
      value: 25000,
      label: '$25,000'
    },
    {
      value: 30000,
      label: '$30,000'
    },
    {
      value: 35000,
      label: 'Unlimited'
    },
  ]
  const luggageMarks = [
    {
      value: 0,
      label: 'None'
    },
    {
      value: 2500,
      label: '$2,500'
    },
    {
      value: 5000,
      label: '$5,000'
    },
    {
      value: 7500,
      label: '$7,500'
    },
    {
      value: 10000,
      label: '$10,000'
    },
    {
      value: 12500,
      label: '$12,000'
    },
    {
      value: 15000,
      label: '$15,000+'
    }
  ]
  const carMarks = [
    {
      value: 0,
      label: 'None'
    },
    {
      value: 1000,
      label: '$1,500'
    },
    {
      value: 2000,
      label: '$2,000'
    },
    {
      value: 3000,
      label: '$3,000'
    },
    {
      value: 4000,
      label: '$4,000'
    },
    {
      value: 5000,
      label: '$5,000'
    },
  ]
  const additionalMarks = [
    {
      value: 0,
      label: 'None'
    },
    {
      value: 5000,
      label: '$5,000'
    },
    {
      value: 10000,
      label: '$10,000'
    },
    {
      value: 20000,
      label: '$20,000'
    },
    {
      value: 35000,
      label: '$35,000'
    },
    {
      value: 50000,
      label: '$50,000+'
    },
  ]
  const handleChange = (e, key, newValue) => {
    switch (key) {
      case 'cancellation':
        setCancellation(newValue);
        break;
      case 'luggage':
        setLuggage(newValue);
        break;
      case 'car':
        setCar(newValue);
        break;
      case 'additional':
        setAdditional(newValue);
        break;
      default:
        break;
    }
  }
  return (
    <div style={{ padding: '10%', background: '#F3F3F3' }}>
      <div style={{ marginTop: '16px'}}>
        <StepSlider
          name="test-cancellation"
          value={cancellation}
          marks={cancellationMarks}
          onChange={(e, newValue) => handleChange(e, 'cancellation', newValue)}
          label={(<>Minimum amount of cover for <strong>trip cancellation</strong></>)}
          tooltip={{
            title: 'Cancellation',
            body: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',
          }}
        />
      </div>
      <div style={{ marginTop: '16px'}}>
        <StepSlider
          name="test-luggage"
          value={luggage}
          marks={luggageMarks}
          onChange={(e, newValue) => handleChange(e, 'luggage', newValue)}
          label={(<>Minimum amount of cover for <strong>luggage</strong></>)}
          tooltip={{
            title: 'Luggage',
            body: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',
          }}
        />
      </div>
      <div style={{ marginTop: '16px'}}>
        <StepSlider
          name="test-car"
          value={car}
          marks={carMarks}
          onChange={(e, newValue) => handleChange(e, 'car', newValue)}
          label={(<>Minimum amount of cover for <strong>car rental excess</strong></>)}
          tooltip={{
            title: 'Car rental excess',
            body: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',
          }}
        />
      </div>
      <div style={{ marginTop: '16px'}}>
        <StepSlider
          name="test-additional"
          value={additional}
          marks={additionalMarks}
          onChange={(e, newValue) => handleChange(e, 'additional', newValue)}
          label={(<>Minimum amount of cover for <strong>additional expenses</strong></>)}
          tooltip={{
            title: 'Additional excess',
            body: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',
          }}
        />
      </div>
    </div>
  );
}}
</Story>
