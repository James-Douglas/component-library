import { useEffect } from 'react';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { withKnobs, text, boolean, number, select } from '@storybook/addon-knobs';
import { useState } from 'react';
import { Loading } from '@comparethemarketau/manor-loading';
import { Button } from '@comparethemarketau/manor-button';

<Meta title="Components/Loading" component={Loading} />

# Primary Loading bar

The Loading component can be used to provide feedback to a user whilst processing is occurring.

<Preview>
  <Story name="primary loading bar">
    {() => {
     return (
      <div style={{ padding: '2%' }}>
         <Loading />
      </div>
      )
    }}
  </Story>
</Preview>

# Secondary Loading Bar

<Preview>
  <Story name="secondary loading bar">
    {() => {
     return (
      <div style={{ padding: '2%'}}>
        <Loading variant="secondary" />
      </div>
      )
    }}
  </Story>
</Preview>

# Primary Loading Spinner

<Preview>
  <Story name="primary loading spinner">
    {() => {
     return (
      <div style={{ padding: '2%'}}>
        <Loading type="spinner" />
      </div>
      )
    }}
  </Story>
</Preview>

# Secondary Loading Spinner

<Preview>
  <Story name="secondary loading spinner">
    {() => {
     return (
      <div style={{ padding: '2%'}}>
        <Loading type="spinner" variant="secondary" />
      </div>
      )
    }}
  </Story>
</Preview>

# Loading with stop
_Forces the loading to end after three seconds_
<Story name="loading with stops">
  {() => {
    const [loadVar, isLoadVar] = useState(false);
    const doReset = () => {
      isLoadVar(false);
      setTimeout(() => {
        isLoadVar(true);
      }, 3000);
    }
    useEffect(() => {
    doReset();
    }, []);
    const optionalProps = {
      messages: [
        'Checking your details',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
      ],
      delayLoading: true
    };
    return (
      <div style={{ padding: '2%' }}>
          {!loadVar && <Loading {...optionalProps} handleLoaded={() => {}} forceStop={loadVar} isDelayMessages />}
          {loadVar && <div style={{fontSize: '30px'}}>Loading done <Button id="test" variant="secondary" handleClick={doReset} size="sm" width="125px">Reset</Button></div>}
      </div>
    )
  }}
</Story>

# Loading without stop
<Story name="loading without stops">
  {() => {
    const [loadVar, isLoadVar] = useState(false);
    setTimeout(() => {
      isLoadVar(true);
    }, 3000);
    const optionalProps = {
      messages: [
        'Checking your details',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
        'Finding great transaction accounts',
        'Sorting by lowest fees',
      ],
      delayLoading: true
    };
   return (
    <div style={{ padding: '2%' }}>
       <Loading {...optionalProps} maxProgress={90} handleLoaded={() => {}} />
     </div>
    )
  }}
</Story>

### Props

<Props of={Loading} />
